<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <script src="./src/vendor/kefir.min.js"></script>
        <script src="./src/rpd.js"></script>
        <script src="./src/toolkit/core.js"></script>
        <script src="./src/render/html.js"></script>
        <script src="./src/render/core.html.js"></script>
        <link rel="stylesheet" href="./src/render/html.css"></style>
        <link rel="stylesheet" href="./src/render/core.html.css"></style>
    </head>

    <body>
        <script>
            var model = Rpd.Model.start().attachTo(document.body)
                                         .renderWith('html'/*, { layout: 'pd' }*/);

            /* var first = new Rpd.Node('core/custom', 'Test');
            first.addInlet('core/number', 'BarIn');
            var boolOutlet = first.addOutlet('core/bool', 'BoolOut', true);
            first.addOutlet('core/number', 'NumOut1', 1);
            first.addOutlet('core/number', 'NumOut2');

            var second = new Rpd.Node('core/custom', 'Foo');
            var boolInlet = second.addInlet('core/bool', 'BoolIn');
            var numInlet = second.addInlet('core/number', 'NumIn');
            second.addInlet('core/bool');
            second.addOutlet('core/number', 'FooOut');

            boolOutlet.connect(boolInlet);
            boolOutlet.connect(numInlet, function(val) { return (val === true) ? 1 : 0 });
            boolOutlet.send(false);
            boolOutlet.stream(Kefir.repeatedly(1000, [true, false])); */

            var genA = new Rpd.Node('core/custom', 'Generate A');
            var outA = genA.addOutlet('core/number', 'A');

            var genA = new Rpd.Node('core/custom', 'Generate B');
            var outB = genA.addOutlet('core/number', 'B', '', 1);

            var sumOfThree = new Rpd.Node('core/sum-of-three-with-body', 'Sum');
            var inA = sumOfThree.inlets['a'];
            var inB = sumOfThree.inlets['b'];

            outA.connect(inA);
            outB.connect(inB);

            outA.stream(Kefir.repeatedly(1000, [1, 2, 3]));
            outB.stream(Kefir.repeatedly(2000, [4, 5, 6]));

            //boolOutlet.disconnect(boolInlet);
            //second.removeInlet(boolInlet)
        </script>
    </body>
</html>
