<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>RPD &mdash; Creating Your Own Toolkits</title>
    <link href="./../highlight-js.min.css" rel="stylesheet" type="text/css">
    <!-- load RPD library and requirements when document will be ready-->
    <link href="./../rpd-docs.css" rel="stylesheet" type="text/css">
    <link href="./../style.css" rel="stylesheet" type="text/css">
    <script defer src="./../kefir.min.js"></script>
    <!-- compiled with: `gulp for-docs`-->
    <script defer src="./../rpd-docs.min.js">       </script>
  </head>
  <body class="rpd-docs-toolkits">
    <header id="_top"><img src="./../rpd.svg" width="30px" height="30px">
      <h1><a href="./../index.html">RPD &mdash; Reactive Patch Development</a></h1>
      <div id="version"><span>v2.0.0</span></div>
    </header>
    <nav>
      <ul>
        <li><a href="./../index.html">Introduction</a>
          <ul>
            <li><a href="./../index.html#what-is-rpd">What is RPD?</a></li>
            <li><a href="./../index.html#features">Features</a></li>
            <li><a href="./../index.html#code-examples">Code Examples</a></li>
            <li><a href="./../index.html#terminology">Terminology</a></li>
          </ul>
        </li>
        <li><a href="./../examples.html">Examples of RPD in Action</a>
          <ul>
          </ul>
        </li>
        <li><a href="./../sections/setup.html">Getting Your Version of RPD</a>
          <ul>
            <li><a href="./../sections/setup.html#download">Download</a></li>
            <li><a href="./../sections/setup.html#setup">Setup</a></li>
            <li><a href="./../sections/setup.html#compilation">Compilation</a></li>
          </ul>
        </li>
        <li><a href="./../sections/network.html">Building a Patch Network</a>
          <ul>
            <li><a href="./../sections/network.html#setup-rendering">Setup Rendering</a></li>
            <li><a href="./../sections/network.html#creating-a-patch">Creating a Patch</a></li>
            <li><a href="./../sections/network.html#adding-nodes">Adding Nodes</a></li>
            <li><a href="./../sections/network.html#connecting-nodes">Connecting Nodes</a></li>
            <li><a href="./../sections/network.html#sending-data">Sending Data</a></li>
            <li><a href="./../sections/network.html#adding-sub-patches">Adding Subpatches</a></li>
            <li><a href="./../sections/network.html#adding-import-export">Adding Import/Export</a></li>
          </ul>
        </li>
        <li><a href="./../sections/api.html">API</a>
          <ul>
            <li><a href="./../sections/api.html#rpd">Rpd</a></li>
            <li><a href="./../sections/api.html#patch">Patch</a></li>
            <li><a href="./../sections/api.html#node">Node</a></li>
            <li><a href="./../sections/api.html#inlet">Inlet</a></li>
            <li><a href="./../sections/api.html#outlet">Outlet</a></li>
            <li><a href="./../sections/api.html#link">Link</a></li>
            <li><a href="./../sections/api.html#modules">Modules</a></li>
          </ul>
        </li>
        <li class="active"><a href="./../sections/toolkits.html">Creating Your Own Toolkits</a>
          <ul>
            <li><a href="./../sections/toolkits.html#creating-toolkits">Organizational Moments</a></li>
            <li><a href="./../sections/toolkits.html#defining-channel-type">Defining Channel Type</a></li>
            <li><a href="./../sections/toolkits.html#defining-node-type">Defining Node Type</a></li>
            <li><a href="./../sections/toolkits.html#writing-channel-renderer">Writing Channel Renderer</a></li>
            <li><a href="./../sections/toolkits.html#writing-node-renderer">Writing Node Renderer</a></li>
            <li><a href="./../sections/toolkits.html#writing-custom-i-o-module">Writing Custom I/O Module</a></li>
          </ul>
        </li>
        <li><a href="./../sections/style.html">Custom Styling RPD</a>
          <ul>
            <li><a href="./../sections/style.html#using-css-classes">Using CSS Classes</a></li>
            <li><a href="./../sections/style.html#writing-your-own-renderer">Writing Your Own Renderer</a></li>
            <li><a href="./../sections/style.html#writing-your-own-style">Writing Your Own Style</a></li>
          </ul>
        </li>
        <li><a href="./../sections/events.html">Subscribing to Events</a>
          <ul>
            <li><a href="./../sections/events.html#global-events">Global Events</a></li>
            <li><a href="./../sections/events.html#network-events">Network Events</a></li>
            <li><a href="./../sections/events.html#patch-events">Patch Events</a></li>
            <li><a href="./../sections/events.html#node-events">Node Events</a></li>
            <li><a href="./../sections/events.html#outlet-events">Outlet Events</a></li>
            <li><a href="./../sections/events.html#inlet-events">Inlet Events</a></li>
            <li><a href="./../sections/events.html#link-events">Link events</a></li>
          </ul>
        </li>
        <li><a href="./../sections/participate.html">Participating in Development</a>
        </li>
      </ul>
    </nav>
    <main>
      <h2>Creating Your Own Toolkits </h2>
      <article><p></p>
<h3 id="organizational-moments">Organizational Moments</h3>
<p>Actually the only recommended thing is to keep directory structure and file names following to the same principle as other toolkits in the sources follow.
Also, <code>gulp</code> compilation relies on these rules, so it&#39;s also good for proper compilation of RPD.
​
Particularly:</p>
<ul>
<li>A Toolkit directory lies under <code>src/toolkit/&lt;toolkit-name&gt;</code>;</li>
<li>Below there&#39;s at least one file named <code>toolkit.js</code>, which defined both Nodes and Channels types in your toolkit;</li>
<li>If you plan to define HTML renderers for your Nodes and Channels, you should name the file containing the definition as <code>html.js</code> and the file with styles as <code>html.css</code>. Same rule applies for other renderers, <code>&lt;renderer-alias&gt;.js</code> and <code>&lt;renderer-alias&gt;.css</code>, i.e. <code>svg.js</code> and <code>svg.css</code>;</li>
<li>If you want to have some Model shared between both toolkit and renderers code, feel free to include it into <code>toolkit.js</code>;</li>
<li>If you want to have some code shared only between renderers, place it into an optional file named <code>shared.js</code>;
​</li>
</ul>
<p>Compilation includes <code>toolkit.js</code> first, then <code>shared.js</code>, if it exists, and then the requested renderer <code>.js</code> file.
​
<em>NB</em>: There&#39;s an agreement to name all nodes and channel types starting with <code>&lt;toolkit-name&gt;/...</code>, i.e. <code>acme/color</code>, <code>acme/canvas</code>.
​
If you are not planning to compile or share the library, though, you are completely free to break the rules the way you want and, for example, define toolkit node types directly in HTML source with only RPD core code included somewhere above. RPD is designed the way where there&#39;s as minimum restrictions as possible and, thanks to immutability, breaking the rules is not damaging to anything.</p>
<h3 id="defining-channel-type">Defining Channel Type</h3>
<p>Channel type defines the way data transformed or visualized (if ever accepted) when it gets to Inlet or Outlet. Not that simple, though — actually it can be accepted or transformed only by Inlet, since what comes from Outlet is decided by (and encapsulated in) Node and may not be controlled at all, as a private code, but <em>incoming</em> data, for safety, should pass the border-check and customs before it gets to the Node.
​
Nonetheless, all these procedures are defined in one channel type, this way:</p>
<pre><code class="lang-javascript">Rpd.channeltype(<span class="hljs-string">'my/color'</span>, {
    ...
});
</code></pre>
<p><!--  example with a node having channels of this type-->
​
Just keep in mind that <code>adapt</code>, <code>allow</code> and <code>accept</code> will be called only by Inlets and <code>show</code> will be called both by Inlet or by Outlet.
​
Channel type could define only some of them of none at all, so these are both valid:</p>
<pre><code class="lang-javascript">Rpd.channeltype(<span class="hljs-string">'my/color'</span>, {
    show: ...
});
Rpd.channeltype(<span class="hljs-string">'my/any'</span>, {});
</code></pre>
<p>For a complete list of properties could be used to define a Channel, see <a href="./api.html#channel-definition">Channel Definition</a> in <a href="./api.html">API section</a>.</p>
<div class="in-progress" text="In Progress."><span>[ In Progress ]</span></div>
<!-- TODO -->
<p><span>show</span>...
​
Please do not forget that all the listed properties could be overriden for a particular instance of a channel, when you pass the description object to <code>node.addInlet</code> or <code>node.addOutlet</code>:</p>
<pre><code class="lang-javascript">
</code></pre>
<p></p>
<h3 id="defining-node-type">Defining Node Type</h3>
<p>Technically, Node is a collection of data inputs (Inlets), some data processing function and a collection of data outputs (Outlets). Visually, it also may contain some body with controls.</p>
<p>Same way, as with Channel type, Node type could be just an empty object, so Nodes of this type won&#39;t have any Inlets, Outlets, neither will they do anything:</p>
<pre><code class="lang-javascript">Rpd.nodetype(<span class="hljs-string">'my/empty'</span>, {});
</code></pre>
<p>On the other hand, these Nodes may just visualize something using the Node body or serve as controls for global Network settings etc. Rendering and controlling Node body is <a href="#writing-a-node-renderer">covered below</a>.</p>
<p>So, in the node type you may specify any number of Inlets, any number of Outlets and a processing function which triggers on any Inlet update, gets all the latest values of the Inlets and returns new values for the Outlets (or empty object, if no outlets should be updated).</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// example only with Outlets</span>
<span class="hljs-comment">// example only with Inlets</span>
<span class="hljs-comment">// example with both</span>
</code></pre>
<p>Definition of the Inlet or Outlet only requires a <code>type</code> field, other fields are optional. They are the same as for <a href="#channel-properties">Channel type</a> and in <a href="./network.md#connecting-nodes"><code>node.addInlet</code> / <code>node.addOutlet</code> methods</a>.
​
For a complete list of properties could be used to define a Node, see <a href="./api.html#node-definition">Node Definition</a> in <a href="./api.html">API section</a>.</p>
<h3 id="writing-a-channel-renderer">Writing a Channel Renderer</h3>
<ul>
<li><code>prepare</code></li>
<li><code>show</code></li>
<li><code>edit</code></li>
</ul>
<p>For a complete list of properties could be used to define a Channel Renderer, see <a href="./api.html#channel-renderer-definition">Channel Renderer Definition</a> in <a href="./api.html">API section</a>.</p>
<div class="in-progress" text="In Progress."><span>[ In Progress ]</span></div>
<p></p>
<h3 id="writing-a-node-renderer">Writing a Node Renderer</h3>
<ul>
<li><code>prepare</code></li>
<li><code>size</code></li>
<li><code>first</code></li>
<li><code>always</code></li>
</ul>
<p>For a complete list of properties could be used to define a Channel Renderer, see <a href="./api.html#node-renderer-definition">Node Renderer Definition</a> in <a href="./api.html">API section</a>.</p>
<div class="in-progress" text="In Progress."><span>[ In Progress ]</span></div>
<p><!-- valueOut may have a timestamp passed with every value,
     that helps in determining which update came first --></p>
<p></p>
<h3 id="writing-custom-i-o-module">Writing Custom I/O Module</h3>
<div class="in-progress" text="In Progress."><span>[ In Progress ]</span></div>

      </article>
      <div id="jump-to-top"><a href="#_top">↑</a></div>
    </main>
    <footer><span>&copy; shaman.sir, 2016</span></footer>
  </body>
</html>