<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />

        <!-- gulp html-head ==style quartz ==renderer html ==toolkit core ==toolkit demo ==root .. -->

        <!-- Built with RPD v0.2.0 <http://shamansir.github.io/rpd> -->

        <!-- RPD Renderer: html -->
        <link rel="stylesheet" href="../src/render/html.css"></style>
        <!-- RPD Style: quartz (html) -->
        <link rel="stylesheet" href="../src/style/quartz/html.css"></style>
        <!-- RPD Toolkit: core (html) -->
        <link rel="stylesheet" href="../src/toolkit/core/html.css"></style>
        <!-- RPD Toolkit: demo (html) -->
        <link rel="stylesheet" href="../src/toolkit/demo/html.css"></style>

        <!-- Kefir -->
        <script src="../vendor/kefir.min.js"></script>
        <!-- RPD -->
        <script src="../src/rpd.js"></script>

        <!-- RPD's d3_tiny.js -->
        <script src="../src/d3_tiny.js"></script>
        <!-- RPD Rendering Engine: -->
        <script src="../src/render/shared.js"></script>
        <!-- RPD Style: quartz (html) -->
        <script src="../src/style/quartz/html.js"></script>
        <!-- RPD Renderer: html -->
        <script src="../src/render/html.js"></script>
        <!-- RPD Toolkit: core -->
        <script src="../src/toolkit/core/shared.js"></script>
        <script src="../src/toolkit/core/toolkit.js"></script>
        <!-- RPD Toolkit: core (html) -->
        <script src="../src/toolkit/core/html.js"></script>

    </head>

    <body>

        <script>
            window.sketchUpdate = function() {}; // we'll replace it later

            // registration
            Rpd.nodetype('p5/sketch', {
                inlets: {
                    'xspacing': { type: 'core/number', default: 16 },
                    'amplitude': { type: 'core/number', default: 75 },
                    'period': { type: 'core/number', default: 500 }
                },
                process: function(inlets) {
                    window.sketchUpdate(inlets);
                }
            });

            Rpd.noderenderer('p5/sketch', 'html', {
                first: function(bodyElm) {
                    var p5Target = document.createElement('div');
                    p5Target.id = 'p5-canvas';
                    bodyElm.appendChild(p5Target);
                }
            });

            // create patch
            var patch = Rpd.addPatch('processing');
            //window.p5Patch = patch;

            patch.render('html', document.body).enter();
            patch.addNode('p5/sketch').move(40, 10);
        </script>

        <!-- p5.js -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.19/p5.min.js"></script>
        <!-- p5 Sketch -->
        <script src="./example.sketch.js"></script>

        <script>
            window.sketchUpdate = function(inlets) {
                sketchConfig = inlets;
                recalcWaves(sketchConfig);
            };
        </script>

    </body>
</html>
